# 正则

## 创建正则表达式

```js
const reg = /\d/g;
```

或者

```js
const reg = new regExp("d", "g");
```

## 匹配字符

### 常用字符

| 字符   | 含义                                           |
| :----- | :--------------------------------------------- |
| \      | 一般用于转义、或加其他字符组合使用             |
| ^      | 匹配字符串的开头                               |
| $      | 匹配字符串的结尾                               |
| \*     | 表示前面的匹配出现 0 次或者多次，可用{0,}代替  |
| +      | 表示前面的匹配出现 1 次或者多次，可用{1,}代替  |
| ？     | 表示前面的匹配出现 0 次或者多次，可用{0,1}代替 |
| .      | 匹配除换行符以外的任意字符                     |
| (x)    | 捕获括号                                       |
| (?:x)  | 非捕获括号                                     |
| \|     | 或                                             |
| {n}    | 用于量词记录，表示前面的匹配出现了 n 次        |
| {n,}   | 用于量词记录，表示前面的匹配至少出现了 n 次    |
| {n,m}  | 用于量词记录，表示前面的匹配出现了 n-m 次      |
| [xyz]  | 字符集合，也可用-隔开，常用[a-zA-Z]代表字母    |
| [^xyz] | 反向字符集合                                   |
| \d     | 数字，相当于[0-9]                              |
| \D     | 非数字                                         |
| \n     | 换行符                                         |
| \r     | 回车符                                         |
| \s     | 空白字符，包括空格、制表符、换行符等           |
| \S     | 非空白字符                                     |
| \w     | 单字字符，字母数字或者下划线，[a-zA-Z0-9_]     |
| \W     | 非单字字符                                     |
| \1     | 与捕获括号一起使用，反向引用                   |

### 断言字符

| 字符    | 含义                                          | 样例                                                   |
| ------- | --------------------------------------------- | ------------------------------------------------------ |
| x(?=y)  | 先行断言，仅当 x 后面出现 y，才会匹配 x       | /\d+(?=rem)/，当数字后面出现 rem，才会匹配该数字       |
| (?<=y)x | 后行断言，仅当 x 之前出现 y，才会匹配 x       | /(?<=\:\s\*)\drem/，当\drem 之前出现:时，才会匹配\drem |
| x(?!y)  | 否定先行断言，仅当 x 后面不出现 y，才会匹配 x | /\d+(?!px)，当数字后面不出现 px，才会匹配数字          |
| (?<!y)x | 否定后行断言，仅当 x 之前不出现 y，才会匹配 x | /(?<!\w)\d/，当数字之前不出现变量字符，才会匹配数字    |

### 捕获括号与非捕获括号

#### 基本用法

```js
const date = "2021-01-03";
const reg1 = /\d{4}-\d{2}-\d{2}/;
reg1.exec(date);
// 输出结果
// ["2021-01-03", index: 0, input: "2021-01-03", groups: undefined]

const reg2 = /(\d{4})-(\d{2})-(\d{2})/;
reg2.exec(date);
// 输出结果
// ["2021-01-03", "2021", "01", "03", index: 0, input: "2021-01-03", groups: undefined]

const reg3 = /(?:\d{4})-(\d{2})-(\d{2})/;
// 输出结果
// ["2021-01-03", "01", "03", index: 0, input: "2021-01-03", groups: undefined]
```

#### 捕获括号 - 反向引用

```js
const reg = /(\d{2})\1/g;
const str = "1212,3434,5566";
reg.exec(str);
// 输出结果
// ["1212", "12", index: 0, input: "1212,3434,5566", groups: undefined]
// ["3434", "34", index: 5, input: "1212,3434,5566", groups: undefined]
// null

const reg2 = /(\d{3})\1\1/g;
const str2 = "123123123,444555666";
reg2.exec(str2);
// 输出结果
// ["123123123", "123", index: 0, input: "123123123,444555666", groups: undefined]
// null
```

#### 命名捕获

用法：`(?<name>group)`

```js
const date = "2021-01-03";
const reg = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
reg.exec(date);
// 输出结果
// ["2021-01-03", "2021", "01", "03", index: 0, input: "2021-01-03", groups: {…}]
// 其中 groups 为
// groups: {year: "2021", month: "01", day: "03"}
```

#### 命名捕获 - 反向引用

用法： `(?<key>group)\k<key>`

```js
const str = "1212,3434,5656";
const reg = /(?<key>\d{2})\k<key>/g;
reg.exec(str);
// 输出结果
// ["1212", "12", index: 0, input: "1212,3434,5656", groups: {…}]
// groups: {key: "12"}
// ["3434", "34", index: 5, input: "1212,3434,5656", groups: {…}]
// groups: {key: "34"}
// ["5656", "56", index: 10, input: "1212,3434,5656", groups: {…}]
// groups: {key: "56"}
//
```

### String.prototype.replace()与正则

当 replace 方法第一个参入参数类型为 regexp 时，第二个参数可用特殊字符代替

| 字符    | 含义                                            |
| ------- | ----------------------------------------------- |
| $&      | 插入匹配的子串                                  |
| $`      | 插入匹配字符左边的的内容                        |
| $'      | 插入匹配字符右边的内容                          |
| $n      | 插入匹配的分组字符                              |
| $<Name> | Name 是分组名称，若没有改分组，则替换为空字符串 |
